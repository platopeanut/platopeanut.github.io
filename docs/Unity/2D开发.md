
## 瓦片地图Tile Map

一个Grid可以包含多个TileMap，多个TileMap之间可以进行排序（用于渲染的先后顺序，底层与顶层），例如Background层位于Terrain层下面。

Tilemap中包含了一个个Tile瓦片

在对TileMap进行地图编辑时，需要：
1. 创建一个Tile Palette调色板（对应保存一个调色板文件）
2. 往调色板中加入对应的瓦片图片
	1. 将一个拆分好的图片拖拽进调色板
	2. 保存对应的拆分后的瓦片（相当于图片对象转为瓦片对象）

TileMap排序使用Sorting Layers，区别于Game Object的Layer属性，这是瓦片地图自己的Layer

## 物理和碰撞Physics & Collision

### 地图

瓦片地图的碰撞盒需要进行合并（优化性能），需要用到的组件：
- Tile Map Collider 2D（需要Used By Composite）
- Rigid Body 2D（通常设置为static）
- Composite Collider 2D

### 角色

角色一个添加的组件：
- Box Collider 2D
- Rigid Body 2D（设置为Dynamic，死亡后设置为Static可以避免玩家输入导致继续移动）

角色一般冻结Free Z轴旋转

### 触发器

- 比如用来收集金币，碰撞盒子不具有物理特性，两个collider（只要任意一个是trigger）就可以发生重合，仅仅用于trigger
- 对应的hook是onTriggerEnter/Exit

## 输入

- 使用Input Manager的方式获取输入
~~~c#
// 左右，返回[-1, 1]浮点数
float dx = Input.GetAxis("horizontal");

// 左右，返回{-1, 0, 1}整数
float dx = Input.GetAxisRaw("horizontal");

// 是否按下跳跃键
bool isPressed = Input.GetButtonDown("Jump");
~~~

- 使用物理进行反馈
	- 左右移动：为刚体组件的速度添加水平速度
	- 跳跃：为刚体组件的速度添加竖直速度

- <span style="color:red;">Physics Box Cast</span>：可以来检测是否是Ground，进而是否可以跳跃
- Terrain挂载组件：Platform Effector 2D（可以解决角色一直卡墙不落的问题），这个组件要依赖Composite Collider 2D组件

## 动画Animation

### Flip X

当角色左右移动时，他的朝向应该与移动方向一致；可以设置`SpriteRenderer`中的`FlipX`属性（bool值）对其进行翻转

### Animator
- 一个Animator是一个组件挂载到一个Game Object上
- 一个Animator对应一个文件
- 一个Animator包含了：
	- 多个Animation
	- Animation之间的转变关系图

- 关系图的转变条件可以设置变量
- Animation之间的过渡可以设置具体细节

### Animation
- 一个Animation就是一个动画
- 多张图片连续播放可以制作一个动画
- 一个Animation对于一个文件
- 还可以设置对于一个动画而言的比如是否循环播放Loop

### 多个动画

在处理多个动画的转换时，可以给角色定义多种不同的状态（使用枚举类），然后Animator根据枚举类的状态值来转换动画，脚本对于特定情况设置对应的枚举状态值。

## 录制动画

- 设置某个时间点，比如禁用某个组件如SpriteRenderer
- 设置某个时间点，调用该GameObject的某个函数

## UI

## Text

- 设置字体Font：Google Font: Press Start2 2P
- 设置文本相对于Canvas的位置
- 设置文本颜色，字体大小

脚本要设置文本内容，就需要拿到Text组件


## 场景管理 Scene Management

- 重载当前关卡